<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../bpsc-question/bpsc-question.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
    
<dom-module id="bpsc-page">
    <link rel="import" type="css" href="bpsc-page.css">
    <template>
        <paper-header-panel mode="seamed">
            <paper-toolbar>
                <div id="headerName">eSWYC <span>{{version}}</span> months</div>
            </paper-toolbar>
        </paper-header-panel>
        <div class="sName">Baby Pediatric Symptom Checklist</div>
        <div class="optionSection">
            <div class="dmoption">Not at all</div>
            <div class="dmoption">Somewhat</div>
            <div class="dmoption">Very Much</div>
            <div class="dmoption">Skip Question</div>
        </div>
        <div id="bpscQuestions"></div>
    </template>
    <script>
        HTMLImports.whenReady(function () {
            Polymer({
                is: 'bpsc-page',
                properties: {
                    questions: {
                        type: Array,
                        notify: true,
                        value: ["Does your child have a hard time being with new people?", 
                        "Does your child have a hard time in new places?", 
                        "Does your child have a hard time with change?", 
                        "Does your child mind being held by other people?", 
                        "Does your child cry a lot?", 
                        "Does your child have a hard time calming down?", 
                        "Is your child fussy or irritable?", 
                        "Is it hard to comfort your child?", 
                        "Is it hard to keep your child on a schedule or routine?", 
                        "Is it hard to put your child to sleep?", 
                        "Is it hard to get enough sleep because of your child?", 
                        "Does your child have trouble staying asleep?"],
                        observer: '_createQuestions',
                    },
                	answers: {
                    	type: Array,
                    	notify: true,
                    	value: [],
                	},
                	version: {
                    	type: Number,
                    	notify: true,
                	},
                },
                listeners: {
        			'scoreChange': 'gatherScore',
      			},
                _createQuestions: function(){
                    var questionContainer = document.getElementById("bpscQuestions");
                    for(var i = 0; i < this.questions.length; i++){
                        var newDevQuestion = document.createElement("bpsc-question");
                        newDevQuestion.questionString = this.questions[i];
                        questionContainer.appendChild(newDevQuestion);
                    };
                },
            	gatherScore: function(){
            		this.answers = []; //clear the answerArray
            		// use document.querySelecotorAll() to get the elements.
   					var answerList = document.querySelectorAll("bpsc-question"); 
    				for( var i = 0; i < answerList.length; i++ ){
    					// append answer from each questions to the answerArray
    					this.answers.push(answerList[i].score); 
    				};    			
    				//console.log(this.bpscAnswers);
           		},
        
            });
        });
    </script>
</dom-module>