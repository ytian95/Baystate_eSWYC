<link rel="import" href="../../bower_components/paper-radio-group/paper-radio-group.html">
<link rel="import" href="../../bower_components/paper-radio-button/paper-radio-button.html">
    
<dom-module id="emotional-question">
    <link rel="import" type="css" href="emotional-question.css">
    <template>
        <div class="emoWrapper">
            <div class="questionString">{{questionString}}</div>
            <paper-radio-group class="emoButtons" selected="{{score}}" allow-empty-selection>
            </paper-radio-group>
        </div>
    </template>
    <script>
    Polymer({
        is: 'emotional-question',
        properties: {
            questionString: {
                type: String,
                notify: true,
                value: "",
            },
            options: {
            	type: Array,
            	notify: true,
            	value: [],
            	observer: "optionsChanged",
            },
            score: {
                type: Number,
                notify: true,
                observer: "_scoreChanged",
            },
        },
        optionsChanged: function(){
            var optionsContainer = this.$$(".emoButtons");
            optionsContainer.innerHTML = "";
            for(var i = 0; i < this.options.length; i++){
                var newOption = document.createElement("paper-radio-button");
                newOption.className = "emoButton";
                newOption.name = i;
                textNode = document.createTextNode(this.options[i]);
                newOption.appendChild(textNode);
                optionsContainer.appendChild(newOption);
            };   
            var lastOption = document.createElement("paper-radio-button");
            lastOption.className = "emoButton";
            lastOption.name = "-1";
            textNode = document.createTextNode("Skip question");
        	lastOption.appendChild(textNode);
            optionsContainer.appendChild(lastOption);         	
        },        
        _scoreChanged: function(){
            	this.fire('scoreChange');
        },
    });
    </script>
</dom-module>