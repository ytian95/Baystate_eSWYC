<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">           
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">            
<dom-module id="result-page">
    <link rel="import" type="css" href="result-page.css">
    <template>
        <paper-header-panel id="header" mode="seamed">
            <paper-toolbar>
                <div id="headerName">Patient's Result <span>{{version}}</span> months</div>
            </paper-toolbar>
        </paper-header-panel>

        <paper-card class="section" heading="Developmental Milestones" elevation="3">
  			<div class="card-content">
  				<paper-button id ="dmstatus">Developmental Milestones Score: 
  					<span>{{dmscore}}</span>
  				</paper-button>			
  				<br/>
        		<canvas id="canvas"></canvas>
        		<br/>
        	</div>
		</paper-card>
		
		<paper-card class="positiveQ" id="dmQ0Card" heading="Not Yet (score:0)" 
			elevation="3">
  			<div class="card-content" id="dmQ0"></div>
		</paper-card>
		
		<paper-card class="positiveQ" id="dmQ1Card" heading="Some What (score:1)" 
			elevation="3">
  			<div class="card-content" id="dmQ1"></div>
		</paper-card>
		
        <paper-card class="section" id="checklist"  
        	heading="Baby Pediatric Symptom Checklist" elevation="3">
  			<div class="card-content">
    			<paper-button id ="irritability" on-click="irriTurn">Irritability: 
    				<span>{{bpscscore.0}}</span>
        		</paper-button>
    			<paper-button id ="inflexibility" on-click="inflTurn">Inflexibility: 
    				<span>{{bpscscore.1}}</span>
        		</paper-button>
        		<paper-button id ="difficulty" on-click="diffTurn">
        			Difficulty with Routines: <span>{{bpscscore.2}}</span>
        		</paper-button>
        		<paper-button id ="ppsc" on-click="ppscTurn">
        			Symptom Checklist Total Score: <span>{{bpscscore.0}}</span>
        		</paper-button>
  			</div>
		</paper-card>
		
		<paper-card class="positiveQ" id="irriCard" heading="Irritability Answer" 
			elevation="3">
  			<div class="card-content" id="irriQ"></div>
		</paper-card>
		
		<paper-card class="positiveQ" id="inflCard" heading="Inflexibility Answer" 
			elevation="3">
  			<div class="card-content" id="inflQ"></div>
		</paper-card>

		<paper-card class="positiveQ" id="diffCard" heading="Difficulty Answer" 
			elevation="3">
  			<div class="card-content" id="diffQ"></div>
		</paper-card>
		
		<paper-card class="positiveQ" id="ppscCard" heading="PPSC Answer" 
			elevation="3">
  			<div class="card-content" id="ppscQ"></div>
		</paper-card>
    
        <paper-card class="section" heading="Parent's Concerns" elevation="3">
  			<div class="card-content" id="pcQ">
        	</div>
		</paper-card>
		
        <iron-ajax
        	id = "ajaxPost"
            method = "POST"
            url = "/send_json.php"
            contentType = "application/json"
            handle-as="json"
            on-response="handleResponse1">
        </iron-ajax>
        
        <div><paper-button raised on-click="_getjson" id="getjson">Create JSON
        </paper-button></div>	    
    </template>
    <script>
		var jsonOfAnswers= "";
        Polymer({
            is: 'result-page',
        	properties: {
        	    questions: {
                    type: Object,
                    notify: true,
                    value: {},
                }, 
            	version: {
                	type: Number,
                	notify: true,
                	observer: 'pullQuestions',
            	},   
            	age: {
            		type: Number,
            		notify: true,
            		value: 2,
            		observer: '_ageChanged',           		
            	},  
            	scaleRatio: {
            		type: Number,
            		value: 60,
            	},        	
            	scoreScaleTable: {
                	type: Object,
                	notify: true,
                	value: {"2": [14, 15],
                			"3": [17, 17],
                			"4": [14, 16],
                			"5": [16, 17],
                			"6": [12, 16],
                			"7": [15, 18],
                			"8": [17, 19],
                			"9": [12, 15],
                			"10": [14, 17],
                			"11": [15, 17],
                			"12": [13, 16],
                			"13": [14, 17],
                			"14": [15, 18],
                			"15": [11, 17],
                			"16": [13, 17],
                			"17": [14, 18],
                			"18": [9, 16],
                			"19": [11, 17],
                			"20": [12, 17],
                			"21": [14, 18],
                			"22": [15, 18],
                			"23": [11, 17],
                			"24": [12, 17],
                			"25": [13, 18],
                			"26": [14, 18],
                			"27": [15, 18],
                			"28": [16, 18],
                			"29": [10, 17],
                			"30": [11, 17],
                			"31": [12, 18],
                			"32": [13, 18],
                			"33": [14, 18],
                			"34": [14, 19],
                			"35": [11, 17],
                			"36": [12, 17],
                			"37": [13, 17],
                			"38": [14, 17],
                			"39": [14, 18],
                			"40": [15, 18],
                			"41": [15, 18],
                			"42": [16, 18],
                			"43": [16, 18],
                			"44": [17, 18],
                			"45": [17, 19],
                			"46": [17, 19],
                			"47": [13, 17],
                			"48": [14, 17],
                			"49": [14, 17],
                			"50": [14, 18],
                			"51": [15, 18],
                			"52": [15, 18],
                			"53": [15, 18],
                			"54": [16, 18],
                			"55": [16, 18],
                			"56": [16, 18],
                			"57": [16, 18],
                			"58": [17, 19],
                			"59": [15, 18],
                			"60": [15, 18],
                			"61": [16, 18],
                			"62": [16, 18],
                			"63": [16, 18],
                			"64": [16, 19],
                			"65": [17, 19],
                			"66": [17, 19],
                			"67": [17, 19],
                			"68": [17, 19],
                			"69": [18, 19],
                			"70": [18, 19],
                			},
                },  
                dmQuestions: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                dmAnswers: {
                    type: Array,
                    notify: true,
                    value: [],
                }, 
                pcQuestions: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                pcAnswers: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                pcscore: {
                	type: Number,
                	notify: true,
                	value: 0,
                },
                familyQuestions: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                familyAnswers: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                familyscore: {
                	type: Array,
                	notify: true,
                	value: [0,0,0],
                },
                emoQuestions: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                emoAnswers: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                emoscore: {
                	type: Number,
                	notify: true,
                	value: 0,
                },
                posiQuestions: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                posiAnswers: {
                    type: Array,
                    notify: true,
                    value: [],
                },
                posiscore: {
                	type: Number,
                	notify: true,
                	value: 0,
                },
                dmscore: {
                	type: Number,
                	notify: true,
                	value: 0,
                	observer: '_scoreChanged',
                },
                bpscscore: {
                	type: Array,
                	notify: true,
                	value: [0,0,0],
                	observer: '_scoreChanged',
                },
                bpscQuestions: {
                    type: Array,
                    notify: true,
                    value: [],
                }, 
                bpscAnswers: {
                    type: Array,
                    notify: true,
                    value: [],
                },       	
            },
            handleResponse1: function (data) {
                jsonOfAnswers= data.detail.response
                console.log(jsonOfAnswers);   
            },
            pullQuestions: function (data) {
                if (this.version){
                    this.questions = {};
                    swycAge=(String(this.version)).concat(" month");
                    console.log(swycAge);
                    this.questions = 
                    jsonOfQuestions[swycAge]["questions"];
                }         
            },
        	drawdmBar: function(value, aveLow, aveUpper, g){
        			g.fillStyle = "#de2b41";
					g.fillRect(30, 50, 2.7*this.scaleRatio,30); 
    				g.fill();
    				g.fillStyle = "#0fa955";
					g.fillRect(30 + 2.7*this.scaleRatio, 50, 
						4.6*this.scaleRatio,30);
    				g.fill();
    				g.fillStyle = "#1a8926";
					g.fillRect(30 + 7.3*this.scaleRatio, 50,
						 2.7*this.scaleRatio,30);
    				g.fill();  

    				g.fillStyle = "white";
					g.font = "14px Arial";
					g.fillText("Below Average", 30 + 35 ,70);
					g.fillText("Average",30 + 95 + 2.7*this.scaleRatio,70);
					g.fillText("Above Average",35 + 30 + 7.3*this.scaleRatio,70);
					g.fillStyle = "black";
					g.fillText("0", 30 - 5, 95);
					g.fillText(aveLow.toString(),30 - 5 + 2.7*this.scaleRatio,95);
					g.fillText(aveUpper.toString(),30 - 5+ 7.3*this.scaleRatio,95);
					g.fillText("20",30 - 5 +10*this.scaleRatio,95);
						
					var markPosition;
					if(this.dmscore < aveLow){	
						markPosition= (this.dmscore/aveLow)*2.7;
					} else if(aveLow <= this.dmscore && this.dmscore <= aveLow){
						markPosition= ((this.dmscore-aveLow)/(aveUpper-aveLow))*4.6 + 2.7;
					} else{
						markPosition= ((this.dmscore-aveUpper)/(20-aveLow))*2.7 + 7.3;
					};
					g.beginPath();							
					g.moveTo(30+markPosition*this.scaleRatio,30);
					g.lineTo(30+markPosition*this.scaleRatio,90);
					g.lineWidth = 2;
					g.stroke();
					if(this.dmscore !== 0 && this.dmscore !== 20 && 
						this.dmscore !== aveLow && this.dmscore !== aveUpper){
						g.fillText(this.dmscore.toString(),
							30 - 5 +markPosition*this.scaleRatio,105);
					};
        	},
        	updatedmstatus: function(lowCutoff){
				if(this.dmscore >= lowCutoff){
    				this.$$('#dmstatus').style.background = "#0fa955";
    			} else {
    	    		this.$$('#dmstatus').style.background = "#de2b41";
    			};        	
        	},
        	layoutdmPostiveQuestions: function(){
        		var question0Container = this.$$('#dmQ0');
        		this.$$('#dmQ0Card').style.display = 'inline-block';
        		question0Container.innerHTML = "";
        		for( var i = 0; i<this.dmAnswers.length; i++){
        			if(this.dmAnswers[i] == 0){
        				var question0 = document.createTextNode(this.dmQuestions[i]);
                    	question0Container.appendChild(question0);
                    	question0Container.appendChild(document.createElement("br"));
        			};
        		}
        		
        		//hidden the the card if there is no score 0 questions.
        		if(question0Container.hasChildNodes() === false){
        			this.$$('#dmQ0Card').style.display = 'none';
        		};
        		
        		var question1Container = this.$$('#dmQ1');
        		this.$$('#dmQ1Card').style.display = 'inline-block';
        		question1Container.innerHTML = "";
        		for( var i = 0; i<this.dmAnswers.length; i++){
        			if(this.dmAnswers[i] == 1){
        				var question1 = document.createTextNode(this.dmQuestions[i]);
                    	question1Container.appendChild(question1);
                    	question1Container.appendChild(document.createElement("br"));
        			};
        		};

        		//hidden the the card if there is no score 1 answer.
        		if(question1Container.hasChildNodes() === false){
        			this.$$('#dmQ1Card').style.display = 'none';
        		};
        	},
        	updatebpscstatus: function(){
        	
        		if(this.age < 18) {
        			this.$$('#ppscCard').style.display = 'none';
        			this.$$('#ppsc').style.display = 'none';
        			if(this.bpscscore[0] < 3){
    					this.$$('#irritability').style.background = "#0fa955";
    					this.$$('#irriCard').style.display = 'none';
    				} else {
    	    			this.$$('#irritability').style.background = "#de2b41";
    	    			this.$$('#irriCard').style.display = 'inline-block';
					};
					if(this.bpscscore[1] < 3){
    					this.$$('#inflexibility').style.background = "#0fa955";
    					this.$$('#inflCard').style.display = 'none';
    				} else {
    	    			this.$$('#inflexibility').style.background = "#de2b41";
    	    			this.$$('#inflCard').style.display = 'inline-block';
					};
					if(this.bpscscore[2] < 3){
    					this.$$('#difficulty').style.background = "#0fa955";
    					this.$$('#diffCard').style.display = 'none';
    				} else {
    	    			this.$$('#difficulty').style.background = "#de2b41";
    	    			this.$$('#diffCard').style.display = 'inline-block';
					};
				} else {
					this.$$('#irriCard').style.display = 'none';
					this.$$('#inflCard').style.display = 'none';
					this.$$('#diffCard').style.display = 'none';
					this.$$('#irritability').style.display = 'none';
					this.$$('#inflexibility').style.display = 'none';
					this.$$('#difficulty').style.display = 'none';
					this.$$('#ppsc').style.display = 'inline-block';
        			if(this.bpscscore[0] < 9){
    					this.$$('#ppsc').style.background = "#0fa955";
    					this.$$('#ppscCard').style.display = 'none';
    				} else {
    	    			this.$$('#ppsc').style.background = "#de2b41";
    	    			this.$$('#ppscCard').style.display = 'inline-block';
					};					
				};
        	},
        	irriTurn: function(){
        		var display = this.$$('#irriCard').style.display;
        		if(display === 'none'){
        			this.$$('#irriCard').style.display = 'inline-block';
        		} else{
        			this.$$('#irriCard').style.display = 'none';
        		};
        	},
        	inflTurn: function(){
        	    var display = this.$$('#inflCard').style.display;
        		if(display === 'none'){
        			this.$$('#inflCard').style.display = 'inline-block';
        		} else{
        			this.$$('#inflCard').style.display = 'none';
        		};
        	},
        	diffTurn: function(){
        	    var display = this.$$('#diffCard').style.display;
        		if(display === 'none'){
        			this.$$('#diffCard').style.display = 'inline-block';
        		} else{
        			this.$$('#diffCard').style.display = 'none';
        		};
        	}, 
        	ppscTurn: function(){
        	    var display = this.$$('#ppscCard').style.display;
        		if(display === 'none'){
        			this.$$('#ppscCard').style.display = 'inline-block';
        		} else{
        			this.$$('#ppscCard').style.display = 'none';
        		};
        	},       	
        	layoutbpscPostiveQuestions: function(){
        		var qAndAString;
        		var stringNode;
        		var answerMap = {"0": "Not at all", 
        						"1": "Somewhat",
        						"2": "Very Much",
        						"-1": "Skip Question"};
        		
        		if(this.bpscAnswers === undefined){
        			this.bpscAnswers = [0,0,0,0,0,0,0,0,0,0,0,0];
        		};
        		if(this.bpscQuestions === undefined){
        			this.bpscQuestions = ["","","","","","","","","","","",""];
        		};
        		
        		if(this.age < 18){
        			var irriContainer = this.$$('#irriQ');
        			irriContainer.innerHTML = "";				
        			for( var i = 0; i < 4; i++){
						qAndAString = this.bpscQuestions[i] + "   Answer: " + 
							answerMap[this.bpscAnswers[i]];
						stringNode = document.createTextNode(qAndAString);
                    	irriContainer.appendChild(stringNode);
                   		irriContainer.appendChild(document.createElement("br"));
            		};
            	
            		var inflContainer = this.$$('#inflQ');
        			inflContainer.innerHTML = "";
            		for( var i = 4; i < 8; i++){
						qAndAString = this.bpscQuestions[i] + "   Answer: " + 
							answerMap[this.bpscAnswers[i]];
						stringNode = document.createTextNode(qAndAString);
                    	inflContainer.appendChild(stringNode);
                    	inflContainer.appendChild(document.createElement("br"));
            		};
            	
            		var diffContainer = this.$$('#diffQ');
        			diffContainer.innerHTML = "";
            		for( var i = 8; i < 12; i++){
						qAndAString = this.bpscQuestions[i] + "   Answer: " + 
							answerMap[this.bpscAnswers[i]];
						stringNode = document.createTextNode(qAndAString);
                    	diffContainer.appendChild(stringNode);
                    	diffContainer.appendChild(document.createElement("br")); 
            		};
            	} else {
            		var ppscContainer = this.$$('#ppscQ');
        			ppscContainer.innerHTML = "";
            		for( var i = 0; i < this.bpscQuestions.length; i++){
						qAndAString = this.bpscQuestions[i] + "   Answer: " + 
							answerMap[this.bpscAnswers[i]];
						stringNode = document.createTextNode(qAndAString);
                    	ppscContainer.appendChild(stringNode);
                    	ppscContainer.appendChild(document.createElement("br")); 
            		};            	
            	};
        	},
        	layoutPCQuestions: function(){
        		var answerMap = {"0": "Not at all", 
        						"1": "Somewhat",
        						"2": "Very Much",
        						"-1": "Skip Question"};
        		var questionContainer = this.$$('#pcQ');
        		//this.$$('#dmQ0Card').style.display = 'inline-block';
        		questionContainer.innerHTML = "";
        		for( var i = 0; i<this.pcAnswers.length; i++){
        			var question = document.createTextNode(this.pcQuestions[i]);
        			qAndAString = this.pcQuestions[i] + "   Answer: " + 
							answerMap[this.pcAnswers[i]];
					stringNode = document.createTextNode(qAndAString);
                    questionContainer.appendChild(stringNode);
                    questionContainer.appendChild(document.createElement("br"));
        		}
        	},
        	_scoreChanged: function(){
        		if(this.bpscscore == undefined){
        			this.bpscscore = [0,0,0]; 
        		};
        		var canvas = this.$$('#canvas');
        		canvas.width = innerWidth;
        		canvas.height = 110;
				var g = canvas.getContext("2d");
				
				var scoreScale = this.scoreScaleTable[this.age.toString()];
				var lowCutoff = scoreScale[0];
				var upCutoff = scoreScale[1];
    			this.drawdmBar(this.dmscore, lowCutoff, upCutoff, g);  				
				this.updatedmstatus(lowCutoff);
				this.layoutdmPostiveQuestions();
			
				this.updatebpscstatus();
				this.layoutbpscPostiveQuestions();	
				
				this.layoutPCQuestions();			
        	},
        	_ageChanged: function(){
        		if(this.age >= 18) {
        			this.$$('#checklist').heading = 
        				"Preschool Pediatric Symptom Checklist";
        		};
        	},
        	_getjson: function(){
        		
        		this.$.ajaxPost.body = {}
        		//jsonOfAnswers[swycAge] = {}

        		var swycAge=(String(this.version)).concat(" month");
        		console.log(swycAge);
        		var temp = {};
        		temp[swycAge] = {};

        	    /*
        		Development milestone/ BPSC/ PPSC/ Parent's Concern answers map:
        		{"0": "Not at all", 
        		 "1": "Somewhat",
        		 "2": "Very Much",
        		 "-1": "Skip Question"};
        		*/        		
        		var devSection = {};
        		var qAndAs =  [];
        		if(this.dmQuestions === undefined ){
        			this.dmQuestions = [];
        		};
        		for (var i=0; i< this.dmQuestions.length; i++){
        			qAndAs.push([this.dmQuestions[i], Number(this.dmAnswers[i])]);
        		};
        		
        		devSection["questions"] = qAndAs;
        		devSection["score"] = [this.dmscore];

        		temp[swycAge]["Development Milestones"] = devSection;
        		
        		if(this.version >= 18) {
        			//ppsc
        			temp[swycAge]["PPSC"] = {}
        			var ppscSection = {};
        			var qAndAs =  [];
        			if(this.bpscQuestions === undefined ){
        				this.bpscQuestions = [];
        			};
        			for (var i=0; i< this.bpscQuestions.length; i++){
        				qAndAs.push([this.bpscQuestions[i], Number(this.bpscAnswers[i])]);
        			};
        			ppscSection["questions"] = qAndAs;
        			ppscSection["score"] = [this.bpscscore[0]];
        			temp[swycAge]["PPSC"] = ppscSection;         				
        		} else {
        			//bpsc
        			if (this.bpscQuestions !== [] && this.bpscQuestions !== undefined){
        				temp[swycAge]["BPSC"] = {}
        				var bpscSection1 = {};
        				var qAndAs1 =  [];
        				for (var i=0; i< 4; i++){
        					qAndAs1.push([this.bpscQuestions[i], 
        						Number(this.bpscAnswers[i])]);
        				};
        				bpscSection1["questions"] = qAndAs1;
        				bpscSection1["score"] = [this.bpscscore[0]];
        				temp[swycAge]["BPSC"]["Irritability"] = bpscSection1; 

        				var bpscSection2 = {};
        				var qAndAs2 =  [];
        				for (var i=4; i< 8; i++){
        					qAndAs2.push([this.bpscQuestions[i], 
        						Number(this.bpscAnswers[i])]);
        				};
        				bpscSection2["questions"] = qAndAs2;
        				bpscSection2["score"] = [this.bpscscore[1]];
        				temp[swycAge]["BPSC"]["Inflexibility"] = bpscSection2; 
        					
        				var bpscSection3 = {};
        				var qAndAs3 =  [];
        				for (var i=8; i< 12; i++){
        					qAndAs3.push([this.bpscQuestions[i], 
        						Number(this.bpscAnswers[i])]);
        				};
        				bpscSection3["questions"] = qAndAs3;
        				bpscSection3["score"] = [this.bpscscore[2]];
        				temp[swycAge]["BPSC"]["Difficulty with Routines"] = bpscSection3; 
        			};      		
        		};

        	    /*
        		POSI answers map:
        		Question 1:
        		{"0": "Many times a day", 
        		 "1": "A few times a day",
        		 "2": "A few times a week",
        		 "3": "less than once a week",
        		 "4": "Never",
        		 "-1": "Skip Question"};
        		 
        		 Question 2 - 5:
        		{"0": "Always", 
        		 "1": "Usually",
        		 "2": "Sometimes",
        		 "3": "Rarely",
        		 "4": "Never",
        		 "-1": "Skip Question"};    
        		 
        		 Question 6 and 7:  
				 Every question has different answer options and answer questions can be 
				 fetched from question.json 
				 -1 is always Skip Question		 
        		*/ 
        		var posiSection = {};
        		var posiqAndAs =  [];
        		if(this.posiQuestions === undefined ){
        			this.posiQuestions = [];
        		};
        		for (i=0; i< this.posiQuestions.length; i++){
        			posiqAndAs.push([this.posiQuestions[i], Number(this.posiAnswers[i])]);
        		};
        		posiSection["questions"] = posiqAndAs;
        		//the score is only for the second sub section
        		posiSection["score"] = [this.posiscore];
        		temp[swycAge]["POSI"] = posiSection;

        		var pcSection = {};
        		var pcqAndAs =  [];
        		if(this.pcQuestions === undefined ){
        			this.pcQuestions = [];
        		};
        		for (i=0; i< this.pcQuestions.length; i++){
        			pcqAndAs.push([this.pcQuestions[i], Number(this.pcAnswers[i])]);
        		};

        		pcSection["questions"] = pcqAndAs;
        		pcSection["score"] = [this.pcscore];
        		temp[swycAge]["Parent Concerns"] = pcSection;

        	    /*
        		Family Questions answers map:
        		Question 1 - 5:
        		{"0": "Yes", 
        		 "1": "No",
        		 "-1": "Skip Question"};
        		 
        		 Question 6 and 7:
        		{"0": "Not at all", 
        		 "1": "Several days",
        		 "2": "More than half the days",
        		 "3": "Nearly everyday",
        		 "-1": "Skip Question"};    
        		 
        		 Question 8 and 9:  
        		{"0": "No tension", 
        		 "1": "Some tension",
        		 "2": "A lot of tension",
        		 "3": "Not applicable",
        		 "-1": "Skip Question"};   		 
        		*/        		
        		var familySection = {};
        		var familyqAndAs =  [];
        		if(this.familyQuestions === undefined ){
        			this.familyQuestions = [];
        		};
        		for (var i=0; i< this.familyQuestions.length; i++){
        			familyqAndAs.push([this.familyQuestions[i], 
        				Number(this.familyAnswers[i])]);
        		};
        		
        		familySection["questions"] = familyqAndAs;
        		familySection["score"] = this.familyscore;

        		temp[swycAge]["Family Questions"] = familySection;        		

        		/*
				Emotional Changes With A New Baby Answers:
				Every question has different answer options and answer questions can be 
				fetched from question.json
				-1 is always Skip Question 		 
        		*/ 	
        		var emoSection = {};
        		var emoqAndAs =  [];
        		if(this.emoQuestions === undefined ){
        			this.emoQuestions = [];
        		};
        		for (i=0; i< this.emoQuestions.length; i++){
        			emoqAndAs.push([this.emoQuestions[i], Number(this.emoAnswers[i])]);
        		};
        		emoSection["questions"] = emoqAndAs;
        		emoSection["score"] = [this.emoscore];
        		temp[swycAge]["Emotional Changes With A New Baby"] = emoSection;       		
        		
        		console.log(temp);
        		this.$.ajaxPost.body = JSON.stringify(temp);      		
        		this.$.ajaxPost.generateRequest();
        		
        		/*
        		var xhttp = new XMLHttpRequest();
  				xhttp.onreadystatechange = function() {
    				if (xhttp.readyState == 4 && xhttp.status == 200) {
     					console.log("xttpworks!!!!");
    				}
  				};
  				xhttp.open("POST", "/patient1.php");
  				xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
				xhttp.send(JSON.stringify({name:"John Rambo", time:"2pm"}));
  				*/
        	}      	
        });
    </script>
</dom-module>
